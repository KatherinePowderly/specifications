{
  "version": 1,
  "style": "unit",
  "description": "must not let more than waitQueueSize threads enter the queue",
  "poolOptions": {
    "maxPoolSize": 1,
    "waitQueueSize": 1
  },
  "operations": [
    {
      "name": "acquire"
    },
    {
      "name": "start",
      "target": "thread1"
    },
    {
      "name": "acquire",
      "thread": "thread1"
    },
    {
      "name": "wait",
      "ms": 20
    },
    {
      "name": "start",
      "target": "thread2"
    },
    {
      "name": "acquire",
      "thread": "thread2"
    },
    {
      "name": "waitFor",
      "target": "thread2"
    }
  ],
  "error": {
    "message": "Attempted to acquire a connection from connection pool while waitQueue was full",
    "errorType": "waitQueueFullError",
    "id": 1
  },
  "events": [
    {
      "type": "connectionAcquisitionStarted"
    },
    {
      "type": "connectionAcquired"
    },
    {
      "type": "connectionAcquisitionStarted"
    },
    {
      "type": "connectionAcquisitionStarted"
    },
    {
      "type": "connectionAcquisitionFailed",
      "reason": "queueFull"
    }
  ],
  "ignore": [
    "connectionCreated",
    "connectionClosed",
    "connectionPoolCreated"
  ]
}
